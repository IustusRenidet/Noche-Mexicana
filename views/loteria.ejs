<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lotería Mexicana | <%= siteName %></title>
  <link rel="stylesheet" href="/styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Signika:wght@400;600&display=swap" rel="stylesheet">
</head>
<body class="page page-loteria">
  <%- include('partials/header') %>
  <main class="container content" data-loteria-cards="<%= encodeURIComponent(JSON.stringify(cards)) %>">
    <section class="page-hero">
      <h1>Lotería mexicana interactiva</h1>
      <p>Canta las cartas sin repetir, ajusta el ritmo y lleva el conteo para organizar una partida inolvidable.</p>
    </section>

    <section class="loteria-panel">
      <div class="loteria-controls">
        <div class="loteria-control-group">
          <label for="delay">Intervalo automático (segundos)</label>
          <input type="number" id="delay" value="2" min="1" max="15" step="1">
        </div>
        <div class="loteria-control-group">
          <label for="modoManual">
            <input type="checkbox" id="modoManual"> Activar modo manual
          </label>
          <p class="help-text">En modo manual tú decides cuándo cantar la siguiente carta.</p>
        </div>
        <div class="loteria-buttons">
          <button id="start" class="button button--primary">Comenzar</button>
          <button id="next" class="button button--secondary" disabled>Siguiente carta</button>
          <button id="stop" class="button button--ghost" disabled>Detener</button>
          <button id="reset" class="button button--ghost" disabled>Reiniciar</button>
        </div>
      </div>

      <div class="loteria-current">
        <h2>Carta actual</h2>
        <div class="loteria-current__card" id="currentCard" aria-live="polite">-</div>
        <div class="loteria-progress">
          <progress
            class="progress"
            id="loteriaProgress"
            value="0"
            max="<%= Math.max(cards.length, 1) %>"
            aria-label="Progreso de cartas cantadas"
            aria-valuetext="0 de <%= cards.length %> cartas"
            title="0 de <%= cards.length %> cartas"
          ></progress>
          <p><span id="calledCount">0</span> de <span id="totalCount"><%= cards.length %></span> cartas cantadas</p>
        </div>
      </div>

      <aside class="loteria-history" aria-live="polite">
        <h2>Cartas cantadas</h2>
        <ol id="calledCards" class="loteria-history__list"></ol>
      </aside>
    </section>

    <section class="loteria-tips">
      <h2>Consejos para tu partida</h2>
      <ul class="tips-list">
        <li>Descarga las tablas clásicas o crea nuevas combinaciones e imprime para cada participante.</li>
        <li>Premia la primera línea, cuadro lleno o forma creativa que acuerden antes de empezar.</li>
        <li>Acompaña la dinámica con música tradicional desde la <a href="/musica">biblioteca musical</a> para ambientar la voz del gritón.</li>
      </ul>
    </section>
  </main>
  <%- include('partials/footer') %>
  <script src="/loteria.js" defer></script>
</body>
</html>
