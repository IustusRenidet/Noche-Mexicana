<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Biblioteca Musical | <%= siteName %></title>
  <link rel="stylesheet" href="/styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Signika:wght@400;600&display=swap" rel="stylesheet">
</head>
<body class="page page-musica">
  <%- include('partials/header') %>
  <main class="container content">
    <section class="page-hero">
      <h1>Biblioteca musical mexicana</h1>
      <p>Encuentra playlists curadas y pistas de muestra para acompañar tu noche mexicana con los sonidos de cada región.</p>
    </section>

    <section class="music-library">
      <% musicLibrary.forEach(function(section) { %>
        <% const sectionId = section.genre.toLowerCase().replace(/[^a-z0-9]+/g, '-'); %>
        <article id="<%= sectionId %>" class="music-section">
          <header class="music-section__header">
            <h2><%= section.genre %></h2>
            <p><%= section.description %></p>
          </header>
          <div class="music-tracks">
            <% section.tracks.forEach(function(track) { %>
              <article class="music-card">
                <div class="music-card__info">
                  <h3><%= track.title %></h3>
                  <p class="music-card__artist"><strong><%= track.artist %></strong> · <%= track.region %> · <%= track.year %></p>
                  <p class="music-card__description"><%= track.description %></p>
                </div>
                <div class="music-card__actions">
                  <% if (track.audioUrl) { %>
                    <audio controls preload="none">
                      <source src="<%= track.audioUrl %>" type="audio/mpeg">
                      Tu navegador no soporta la reproducción de audio.
                    </audio>
                  <% } %>
                  <a class="button button--secondary" href="<%= track.infoUrl %>" target="_blank" rel="noopener">Saber más</a>
                </div>
              </article>
            <% }) %>
          </div>
          <% if (section.playlistUrl) { %>
            <div class="playlist-link">
              <a class="button button--primary" href="<%= section.playlistUrl %>" target="_blank" rel="noopener">Abrir playlist completa</a>
            </div>
          <% } %>
        </article>
      <% }) %>
    </section>
  </main>
  <%- include('partials/footer') %>
</body>
</html>
